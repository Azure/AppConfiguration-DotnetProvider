environment:
  host:
    os: windows
  runtime:
    provider: appcontainer
    image: cdpxwin.azurecr.io/global/vse2017u5-external-azsdk-ext-win14393.1884:4.2
  
restore:
  commands:
    - !!defaultcommand
      name: 'Restore'
      command: 'build.cmd'
      arguments: 'RestoreOnly'

build:
  commands:
    - !!buildcommand
      name: 'Dotnet Build'
      command: 'build.cmd'
      logs:
        - from: 'buildlogs'
          to: 'Build Logs'
          include:
            - '**/*'
      artifacts:
        - from: 'src'
          to: 'Binaries'
          include:
            - '*/bin/BuildOutput/**/*AppConfiguration*'

package:
  commands:
    - !!buildcommand
      name: 'Dotnet Pack'
      command: 'pack.cmd'
      logs:
        - from: 'buildlogs'
          to: 'Build Logs'
          include:
            - '**/*'
      artifacts:
        - from: 'src'
          to: 'Packages'
          include:
            - '*/bin/PackageOutput/**/*.nupkg'
